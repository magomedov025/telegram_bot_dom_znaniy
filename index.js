const TelegramBot = require('node-telegram-bot-api')
const sqlite3 = require('sqlite3').verbose()

const botToken = '6769571066:AAF8bRZ_Cz6jVoh_TV1s5Hhmnc3ZgI020ek'

const db = new sqlite3.Database('users.db')

db.run('CREATE TABLE IF NOT EXISTS Users (chat_id INTEGER PRIMARY KEY)')

let linkYoutube = `https://youtube.com/live/KxhER9bKsNk?feature=share`

function sendReminder(bot) {
	const message = `üòé –£—á–∞—Å—Ç–Ω–∏–∫–∏!

	–¢–æ—Ä–æ–ø–∏—Ç–µ—Å—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–≤–æ–∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –∏ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –≤ 12:00 –º—Å–∫ –∫ –º–µ–≥–∞–ø–æ–ª–µ–∑–Ω–æ–º—É –≤–µ–±–∏–Ω–∞—Ä—É "–î–µ–Ω—å –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–≤–µ—Ä–µ–π –≤ ¬´–î–æ–º–µ –ó–Ω–∞–Ω–∏–π¬ª"! 
	
	–†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª—ã, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –∏ —Ç—å—é—Ç–æ—Ä—ã –ø–æ–¥—Ä–æ–±–Ω–æ —Ä–∞—Å—Å–∫–∞–∂—É—Ç –æ —Ç–æ–º, –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª–∞, –∫–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –æ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –∏–º–µ—Ç—å, —á—Ç–æ–± –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è—Ç—å –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ–µ –æ–±—É—á–µ–Ω–∏–µ, –∞ –≤—ã —Å–º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å —Å–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã!
	
	üéâ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–π—Ç–µ—Å—å –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª–µ–∑–Ω–æ–π
	–∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏–∑ –ø–µ—Ä–≤—ã—Ö —É—Å—Ç! ${linkYoutube}`
	db.all('SELECT chat_id FROM Users', function (err, rows) {
		if (err) {
			console.error(err)
		} else {
			rows.forEach(function (row) {
				bot.sendMessage(row.chat_id, message).catch(console.error)
			})
		}
	})
}

function sendReminder2(bot) {
	const message = `‚ö°Ô∏è–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å, —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å!

	üïò 11:45 –ø–æ –º—Å–∫, –∞ –∑–Ω–∞—á–∏—Ç, –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª–∞ ¬´–î–æ–º –ó–Ω–∞–Ω–∏–π¬ª –≤–æ—Ç-–≤–æ—Ç –Ω–∞—á–Ω–µ—Ç –≤–µ–±–∏–Ω–∞—Ä –î–µ–Ω—å –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–≤–µ—Ä–µ–π!
	
	–ù–∞ –Ω–µ–º –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–∏ –≤–æ –≥–ª–∞–≤–µ —Å –≥–µ–Ω–µ—Ä–∞–ª—å–Ω—ã–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–æ–º —Ä–∞—Å—Å–∫–∞–∂—É—Ç –æ –ø—Ä–∏–Ω—Ü–∏–ø–∞—Ö —Ä–∞–±–æ—Ç—ã –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª—ã, –æ —Ç–æ–º, –∫–æ–º—É –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥–æ–π–¥–µ—Ç –æ–Ω–ª–∞–π–Ω-–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ, –∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å —Å–∫–∏–¥–∫–∏ –∏ –ª—å–≥–æ—Ç—ã –Ω–∞ –æ–±—É—á–µ–Ω–∏–µ, –∞ —Ç–∞–∫–∂–µ –æ—Ç–≤–µ—Ç—è—Ç –Ω–∞ –≤–∞—à–∏ –≤–æ–ø—Ä–æ—Å—ã –æ —à–∫–æ–ª—å–Ω–æ–º –æ–Ω–ª–∞–π–Ω-–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–∏!
	
	üéâ –ú—ã –∂–¥–µ–º –∏–º–µ–Ω–Ω–æ –≤–∞—Å! ${linkYoutube}`
	db.all('SELECT chat_id FROM Users', function (err, rows) {
		if (err) {
			console.error(err)
		} else {
			rows.forEach(function (row) {
				bot.sendMessage(row.chat_id, message).catch(console.error)
			})
		}
	})
}

function sendReminder3(bot) {
	const message = `üì£ –í–µ–±–∏–Ω–∞—Ä –æ–∫–æ–Ω—á–µ–Ω! –ù–æ –¥–ª—è –≤–∞—Å –º—ã –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –µ–≥–æ –∑–∞–ø–∏—Å—å! üè† –í–µ–±–∏–Ω–∞—Ä "–î–µ–Ω—å –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–≤–µ—Ä–µ–π ¬´–î–æ–º–∞ –ó–Ω–∞–Ω–∏–π¬ª" –æ–∫–æ–Ω—á–µ–Ω!
	
	üòî –ù–∞–º –∂–∞–ª—å, —á—Ç–æ –≤–∞—Å –Ω–µ –±—ã–ª–æ —Å –Ω–∞–º–∏. –ù–∞–¥–µ–µ–º—Å—è, —á—Ç–æ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑ –≤—ã —Å–º–æ–∂–µ—Ç–µ –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ –Ω–∞—à–∏–º —ç—Ñ–∏—Ä–∞–º!
	
	–í —ç—Ç–æ—Ç —á–∞—Ç-–±–æ—Ç –±—É–¥—É—Ç –ø—Ä–∏—Ö–æ–¥–∏—Ç—å –Ω–æ–≤–æ—Å—Ç–∏ —à–∫–æ–ª—ã, –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è—Ö, –∞–∫—Ü–∏—è—Ö –∏ —Å–∫–∏–¥–∫–∞—Ö.
	
	–ê —Ç–∞–∫–∂–µ –ø–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –Ω–∞—à –¢–µ–ª–µ–≥—Ä–∞–º-–∫–∞–Ω–∞–ª, —á—Ç–æ–±—ã —Ç–æ—á–Ω–æ –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å https://t.me/d_znaniy.
	
	üî• –°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–∞–º–∏ –∏ —Å—Ç—Ä–µ–º–∏—Ç–µ—Å—å –∫ –∑–Ω–∞–Ω–∏—è–º —Å –ª—é–±–æ–≤—å—é! ${linkYoutube}`
	db.all('SELECT chat_id FROM Users', function (err, rows) {
		if (err) {
			console.error(err)
		} else {
			rows.forEach(function (row) {
				bot.sendMessage(row.chat_id, message).catch(console.error)
			})
		}
	})
}

const bot = new TelegramBot(botToken, { polling: true })

bot.onText(/\/start/, function (message) {
	const chatId = message.chat.id
	db.run('INSERT INTO Users(chat_id) VALUES(?)', chatId, function (err) {
		if (err) {
			console.error(err)
		} else {
			let messageFirst = `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å!
			–í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–ª–∏—Å—å –≤ —á–∞—Ç-–±–æ—Ç–µ –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª—ã ¬´‚Äé–î–æ–º –ó–Ω–∞–Ω–∏–π¬ª!
			27 –º–∞—è –≤ 12:00 –º—Å–∫ –ø—Ä–æ–π–¥–µ—Ç –≤–µ–±–∏–Ω–∞—Ä ‚Äú–î–µ–Ω—å –æ—Ç–∫—Ä—ã—Ç—ã—Ö –¥–≤–µ—Ä–µ–π –≤ ¬´–î–æ–º–µ –ó–Ω–∞–Ω–∏–π¬ª‚Äù.
			–ê –¥–ª—è —Ç–æ–≥–æ, —á—Ç–æ–±—ã –Ω–µ –ø–æ—Ç–µ—Ä—è—Ç—å —Å –≤–∞–º–∏ —Å–≤—è–∑—å, –º—ã –Ω–∞–ø–æ–º–Ω–∏–º –≤–∞–º –æ –≤–µ–±–∏–Ω–∞—Ä–µ –∑–∞ –æ–¥–∏–Ω –¥–µ–Ω—å –¥–æ —Ç—Ä–∞–Ω—Å–ª—è—Ü–∏–∏!

			üî• –ü—Ä–∏—Ö–æ–¥–∏—Ç–µ –Ω–∞ –≤–µ–±–∏–Ω–∞—Ä, –∏ —É–∑–Ω–∞–µ—Ç–µ:

			‚ñ™Ô∏è –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç ¬´–î–æ–º –ó–Ω–∞–Ω–∏–π¬ª?
			‚ñ™Ô∏è –ö–∞–∫–∏–µ —Ñ–æ—Ä–º–∞—Ç—ã –æ–±—É—á–µ–Ω–∏—è –µ—Å—Ç—å –≤ —à–∫–æ–ª–µ?
			‚ñ™Ô∏è –ö–æ–º—É –ø–æ–¥–æ–π–¥–µ—Ç –æ–Ω–ª–∞–π–Ω-–æ–±—É—á–µ–Ω–∏–µ?
			‚ñ™Ô∏è –ö–∞–∫ —É—á–µ–Ω–∏–∫–∏ —Å–¥–∞—é—Ç –û–ì–≠ –∏ –ï–ì–≠ –∏ –ø–æ–ª—É—á–∞—é—Ç –∞—Ç—Ç–µ—Å—Ç–∞—Ç?
			‚ñ™Ô∏è –ö–∞–∫ –∑–∞—á–∏—Å–ª–∏—Ç—å —Ä–µ–±–µ–Ω–∫–∞ –≤ –æ–Ω–ª–∞–π–Ω-—à–∫–æ–ª—É?
			‚ñ™Ô∏è –û —Å–∫–∏–¥–∫–∞—Ö –∏ –ª—å–≥–æ—Ç–∞—Ö, –±–ª–∞–≥–æ–¥–∞—Ä—è –∫–æ—Ç–æ—Ä—ã–º –º–æ–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å –æ–±—É—á–µ–Ω–∏–µ –≤—ã–≥–æ–¥–Ω–µ–µ!

			‚úçÔ∏è –ê —Ç–∞–∫–∂–µ —Å–º–æ–∂–µ—Ç–µ –∑–∞–¥–∞—Ç—å —Å–≤–æ–∏ –≤–æ–ø—Ä–æ—Å—ã –≥–µ–Ω–µ—Ä–∞–ª—å–Ω–æ–º—É –¥–∏—Ä–µ–∫—Ç–æ—Ä—É –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª—è–º!

			–û–±–µ—â–∞–µ–º, –±—É–¥–µ—Ç –ø–æ–ª–µ–∑–Ω–æ!`
			bot.sendMessage(chatId, messageFirst)
		}
	})
})

const schedule = require('node-schedule')

const inAnHourDate = new Date(2024, 4, 27, 11, 0, 0)
const inFifteenMinutesDate = new Date(2024, 4, 27, 11, 45, 0)
const afterDate = new Date(2024, 4, 27, 14, 0, 0)
const job1 = schedule.scheduleJob(inAnHourDate, function () {
	sendReminder(bot)
})

const job2 = schedule.scheduleJob(inFifteenMinutesDate, function () {
	sendReminder2(bot)
})

const job3 = schedule.scheduleJob(afterDate, function () {
	sendReminder3(bot)
})

console.log('–ë–æ—Ç –∑–∞–ø—É—â–µ–Ω!')
